(function(){"use strict";var a=this;a.define(["backbone","communicator","timeslider","timeslider_plugins","globals","underscore","d3"],function(a,b,c,d,e){var f=a.Marionette.ItemView.extend({id:"timeslider",events:{selectionChanged:"onChangeTime"},initialize:function(a){this.options=a},render:function(){},onShow:function(){this.listenTo(b.mediator,"map:layer:change",this.changeLayer);var a=new Date(this.options.brush.start),c=new Date(this.options.brush.end);this.slider=new TimeSlider(this.el,{domain:{start:new Date(this.options.domain.start),end:new Date(this.options.domain.end)},brush:{start:a,end:c},debounce:200,datasets:[]}),b.mediator.trigger("time:change",{start:a,end:c})},onChangeTime:function(a){b.mediator.trigger("time:change",a.originalEvent.detail)},changeLayer:function(a){if(!a.isBaseLayer){var b=e.products.find(function(b){return b.get("view").id==a.id});b&&(a.visible&&b.get("timeSlider")?this.slider.addDataset({id:b.get("download").id,color:b.get("color"),data:new TimeSlider.Plugin.EOWCS({url:b.get("download").url,eoid:b.get("download").id,dataset:b.get("download").id})}):this.slider.removeDataset(b.get("download").id))}}});return{TimeSliderView:f}})}).call(this);