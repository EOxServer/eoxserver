(function(){"use strict";var a=this;a.define(["backbone","communicator","hbs!tmpl/BulletLayer","underscore"],function(a,b){var c=a.Marionette.ItemView.extend({events:{click:"onClick"},initialize:function(){this.listenTo(b.mediator,"selection:activated",this.onSelectionActivated),this.listenTo(b.mediator,"ui:close",this.onDialogClose),this.listenTo(b.mediator,"selection:enabled",this.onSelectionEnabled)},onClick:function(){this.model.get("enabled")&&("selection"==this.model.get("type")?this.model.get("active")?(b.mediator.trigger("selection:activated",{id:this.model.get("id"),active:!1}),this.model.set({active:!1})):(b.mediator.trigger("selection:activated",{id:this.model.get("id"),active:!0}),this.model.set({active:!0})):this.model.get("active")?(b.mediator.trigger(this.model.get("eventToRaise"),!1),this.model.set({active:!1})):(b.mediator.trigger(this.model.get("eventToRaise"),!0),this.model.set({active:!0})),this.render())},onSelectionActivated:function(a){a.active&&this.model.get("id")!=a.id&&this.model.get("active")&&(this.model.set({active:!1}),this.render())},onDialogClose:function(a){this.model.get("id")==a&&(this.model.set({active:!1}),this.render())},onSelectionEnabled:function(a){this.model.get("id")==a.id&&(this.model.set({enabled:a.enabled}),this.render())},onRender:function(){this.$el.is("div")?this.setElement($(this.$el.children()[0]).unwrap()):this.$el.is("button")&&this.setElement($(this.$el.children()[0]).unwrap())}});return{ToolItemView:c}})}).call(this);